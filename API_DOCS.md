# üè¶ Bank Prototype API ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## üìå –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**Base URL:** `http://localhost:8080`  
**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** JWT Bearer Token (–∫—Ä–æ–º–µ –ø—É–±–ª–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)

---

## üîì –ü—É–±–ª–∏—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

### 1. Health Check
```http
GET /health
```
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "OK",
  "time": "Mon, 26 Dec 2025 10:00:00 GMT",
  "message": "–í—Å—ë —á–∏–∫–∏ –ø—É–∫–∏ –±—Ä–∞—Ç–∏—à–∫–∞! üè¶",
  "service": "Bank Prototype API",
  "version": "0.1.0"
}
```

---

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
POST /register
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "username",
  "password": "password123"
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

---

### 3. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```http
POST /login
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "username",
  "password": "password123"
}
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

---

## üîê –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT)

**–ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
Authorization: Bearer YOUR_JWT_TOKEN
```

---

## üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### 4. –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
DELETE /users/me
Authorization: Bearer TOKEN
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω"
}
```

---

## üí∞ –°—á–µ—Ç–∞

### 5. –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞
```http
POST /accounts
Authorization: Bearer TOKEN
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": "13123456789012",
  "balance": 100.00,
  "status": "active",
  "created_at": "2025-12-26 10:00:00"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: 100.00
- –ú–∞–∫—Å–∏–º—É–º 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—á–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞: `403 Forbidden`

---

### 6. –°–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /accounts
Authorization: Bearer TOKEN
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "accounts": [
    {
      "id": "13123456789012",
      "balance": 150.50,
      "status": "active",
      "created_at": "2025-12-26 10:00:00"
    },
    {
      "id": "13987654321098",
      "balance": 0.00,
      "status": "closed",
      "created_at": "2025-12-25 15:30:00"
    }
  ],
  "total": 2,
  "active_count": 1,
  "closed_count": 1,
  "max_accounts": 5,
  "can_create_more": true
}
```

---

### 7. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å—á—ë—Ç–µ
```http
GET /accounts/{account_id}
Authorization: Bearer TOKEN
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": "13123456789012",
  "balance": 150.50,
  "status": "active",
  "created_at": "2025-12-26 10:00:00"
}
```

**–û—à–∏–±–∫–∏:**
- `404 Not Found` ‚Äî —Å—á—ë—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `403 Forbidden` ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–æ–º—É —Å—á—ë—Ç—É
- `410 Gone` ‚Äî —Å—á—ë—Ç –∑–∞–∫—Ä—ã—Ç

---

### 8. –ó–∞–∫—Ä—ã—Ç–∏–µ —Å—á—ë—Ç–∞
```http
DELETE /accounts/{account_id}
Authorization: Bearer TOKEN
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "message": "–°—á—ë—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç",
  "account_id": "13123456789012"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ë–∞–ª–∞–Ω—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å—á—ë—Ç –±–∞–Ω–∫–∞
- –°—á—ë—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `closed` (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
- –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –º–µ—Å—Ç–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å—á—ë—Ç–∞

---

## üí∏ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### 9. –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ (–∫–æ–º–∏—Å—Å–∏—è 1%)
```http
POST /transactions/transfer
Authorization: Bearer TOKEN
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "from_account_id": "13123456789012",
  "to_account_id": "13987654321098",
  "amount": 100.00
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "type": "transfer",
  "from_account_id": "13123456789012",
  "to_account_id": "13987654321098",
  "amount": 100.00,
  "fee_percent": 1,
  "fee_amount": 1.00,
  "total_debit": 101.00,
  "status": "completed",
  "created_at": "2025-12-26 10:15:30"
}
```

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö–æ–º–∏—Å—Å–∏—è: 1% –æ—Ç —Å—É–º–º—ã
- –°–ø–∏—Å–∞–Ω–∏–µ —Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è: `amount + fee`
- –ó–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—é: `amount`
- –ö–æ–º–∏—Å—Å–∏—è ‚Üí —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å—á—ë—Ç –±–∞–Ω–∫–∞

**–û—à–∏–±–∫–∏:**
- `400 Bad Request` ‚Äî —Å—É–º–º–∞ ‚â§ 0 –∏–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ —Å–∞–º–æ–º—É —Å–µ–±–µ
- `400 Bad Request` ‚Äî –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
- `403 Forbidden` ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—á—ë—Ç—É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- `404 Not Found` ‚Äî –æ–¥–∏–Ω –∏–∑ —Å—á–µ—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `410 Gone` ‚Äî –æ–¥–∏–Ω –∏–∑ —Å—á–µ—Ç–æ–≤ –∑–∞–∫—Ä—ã—Ç

---

### 10. –ü–ª–∞—Ç—ë–∂ (–∫–æ–º–∏—Å—Å–∏—è 3%)
```http
POST /transactions/payment
Authorization: Bearer TOKEN
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "from_account_id": "13123456789012",
  "to_account_id": "13987654321098",
  "amount": 100.00
}
```

**–û—Ç–≤–µ—Ç (201 Created):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "type": "payment",
  "from_account_id": "13123456789012",
  "to_account_id": "13987654321098",
  "amount": 100.00,
  "fee_percent": 3,
  "fee_amount": 3.00,
  "total_debit": 103.00,
  "status": "completed",
  "created_at": "2025-12-26 10:20:00"
}
```

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ö–æ–º–∏—Å—Å–∏—è: 3% –æ—Ç —Å—É–º–º—ã
- –û—Å—Ç–∞–ª—å–Ω–æ–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–µ—Ä–µ–≤–æ–¥—É

---

### 11. –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```http
GET /transactions
GET /transactions?account_id={account_id}
Authorization: Bearer TOKEN
```

**–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞:** –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ –≤—Å–µ–º —Å—á–µ—Ç–∞–º)  
**–° —Ñ–∏–ª—å—Ç—Ä–æ–º:** –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞ (–≤—Ö–æ–¥—è—â–∏–µ + –∏—Å—Ö–æ–¥—è—â–∏–µ)

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "transactions": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "type": "transfer",
      "from_account_id": "13123456789012",
      "to_account_id": "13987654321098",
      "amount": 100.00,
      "fee_percent": 1,
      "fee_amount": 1.00,
      "total_debit": 101.00,
      "status": "completed",
      "created_at": "2025-12-26 10:15:30"
    }
  ],
  "total": 1,
  "account_id": "13123456789012"
}
```

---

### 12. –î–µ—Ç–∞–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```http
GET /transactions/{transaction_id}
Authorization: Bearer TOKEN
```

**–û—Ç–≤–µ—Ç (200 OK):**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "type": "transfer",
  "from_account_id": "13123456789012",
  "to_account_id": "13987654321098",
  "amount": 100.00,
  "fee_percent": 1,
  "fee_amount": 1.00,
  "total_debit": 101.00,
  "status": "completed",
  "created_at": "2025-12-26 10:15:30"
}
```

**–û—à–∏–±–∫–∏:**
- `404 Not Found` ‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- `403 Forbidden` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

## üìä –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `200 OK` | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| `201 Created` | –†–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω |
| `400 Bad Request` | –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| `401 Unauthorized` | –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ –æ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω |
| `403 Forbidden` | –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ |
| `404 Not Found` | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| `410 Gone` | –†–µ—Å—É—Ä—Å —É–¥–∞–ª—ë–Ω/–∑–∞–∫—Ä—ã—Ç |
| `500 Internal Server Error` | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

---

## üîí –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å—á–µ—Ç–∞

**–°–∏—Å—Ç–µ–º–Ω—ã–π —Å—á—ë—Ç –±–∞–Ω–∫–∞:** `00000000000001`  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±–æ—Ä–∞ –∫–æ–º–∏—Å—Å–∏–π –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –æ—Ç –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å—á–µ—Ç–æ–≤.

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (curl)

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```bash
TOKEN=$(curl -X POST http://localhost:8080/register \
  -H "Content-Type: application/json" \
  -d '{"name":"testuser","password":"pass123"}' | jq -r '.token')
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞
```bash
ACCOUNT=$(curl -X POST http://localhost:8080/accounts \
  -H "Authorization: Bearer $TOKEN" | jq -r '.id')
```

### –ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
```bash
curl -X POST http://localhost:8080/transactions/transfer \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "from_account_id":"'$ACCOUNT'",
    "to_account_id":"13987654321098",
    "amount":50.00
  }'
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

‚úÖ **–≠—Ç–∞–ø 0 –ó–ê–í–ï–†–®–Å–ù** ‚Äî –±–∞–∑–æ–≤—ã–π REST API –≥–æ—Ç–æ–≤!

üîú **–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:**
1. –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å K6
2. –§–∏–∫—Å–∞—Ü–∏—è baseline –º–µ—Ç—Ä–∏–∫
3. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

